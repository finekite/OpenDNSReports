@model OpenDnsLogs.Models.ManageEmailReportsModel

<button id="collapse-button" type="button" class="btn btn-info" data-toggle="collapse" data-target="#demo">Add another report</button>
<div id="demo" style="display:none">
    @using (Ajax.BeginForm("ManageEmailReports", "Home", new AjaxOptions
    {
        HttpMethod = "POST",
        UpdateTargetId = "report-view"
    }))
    {
        @Html.HiddenFor(x => x.Email)
        @Html.HiddenFor(x => x.UserId)

        <div class="row report-and-filter-options" style="padding-top:30px">
            <div class="col-lg-2" style="width:20%">
                Report Type:
                @Html.ValidationMessageFor(x => x.EmailReportSettings.ReportTypes, "", new { @class = "text-danger" })
                @Html.EnumDropDownListFor(x => x.EmailReportSettings.ReportTypes, "Select", new { @class = "form-control", required = "required" })
            </div>
            <div class="col-lg-2" style="margin-left:-1px; width:20%">
                Email Occurence:
                @Html.ValidationMessageFor(x => x.EmailReportSettings.EmailOccurence, "", new { @class = "text-danger" })
                @Html.EnumDropDownListFor(x => x.EmailReportSettings.EmailOccurence, "Select", new { @class = "form-control email-class"@*, required = "required"*@})
            </div>
            <div class="col-lg-2" style="width:20%">
                From When:
                @Html.ValidationMessageFor(x => x.EmailReportSettings.FromWhen, "", new { @class = "text-danger" })
                @Html.EnumDropDownListFor(x => x.EmailReportSettings.FromWhen, "Select", new { @class = "form-control email-class", @style = @"width:100%"@*, required = "required"*@})
            </div>
            <div class="col-lg-2" style="width:20%; margin-top: 16px;">
                <input type="submit" value="Submit" class="btn btn-success" />
            </div>
            <div id="error-message"></div>
        </div>
    }
</div>
<br />
<br />
<br />
<table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <tr>
        <th>Report Type</th>
        <th>Email Occurence</th>
        <th>From When</th>
        <th>Action</th>
    </tr>
    @{
        foreach (var setting in Model.EmailReportSettingsList)
        {
            <tr>
                <td>@setting.ReportTypes.ToString()</td>
                <td>@setting.EmailOccurence.ToString()</td>
                <td>@setting.FromWhen.ToString()</td>
                <td>@Html.ActionLink("Edit", "Edit") &nbsp;&nbsp; @Html.ActionLink("Delete", "Delete")</td>
            </tr>
        }
    }
</table>
<script>
    $("#collapse-button").click(function () {
        $("#demo").toggle();
    });
</script>
